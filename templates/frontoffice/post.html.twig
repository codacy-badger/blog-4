{% include "/frontoffice/header.html.twig" %} 

{% block content %} 
    <div class="container mt-5">
        <div class="row">
            <div class="col-lg-12">
                <!-- Post content-->
                <article>
                    <!-- Post header-->
                    <header class="mb-4">
                        <!-- Post title-->
                        <h1 class="fw-bolder mb-1 text-center">{{ post.title }}</h1>
                        <!-- Post meta content-->
                    </header>
                    <!-- Preview image figure-->
                    <figure class="mb-4 text-center">
                        <div class="text-muted fst-italic mb-2">Publié le {{ post.DateCreated | date("d/m/Y") }} par {{ post.pseudo}}</div><img class="img-fluid rounded"
                            src="https://dummyimage.com/900x400/ced4da/6c757d.jpg" alt="..." /></figure>
                    <!-- Post content-->
                    <section class="mb-5">
                        <p class="fs-5 mb-4">{{post.shortContent}}</p>
                        <p class="fs-5 mb-4">{{post.content}}</p>
                        <div class="text-muted fst-italic mb-2">Dernière modification {{ post.DateUp| date("d/m/Y") }} à {{ post.DateUp| date("H:m") }}</div>

                        <p class="fs-5 mb-4">{{post.id}}</p>
                    </section>
                </article>
                <!-- Comments section-->
            </div>
        </div>
    </div>
<div class="container mt-5">
    <div class="row d-flex justify-content-center">
        <div class="col-md-8">
            <div class="headings d-flex justify-content-between align-items-center mb-3">
            {% if comments %}
                <h5>Les commentaires</h5>
            </div>
            
                 
                            {% for comment in comments %}
            <div class="card p-3 mt-2">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="user d-flex flex-row align-items-center"><span><small class="font-weight-bold text-primary">@{{ comment.pseudoUser }}</small> <small class="font-weight-bold">{{ comment.content }} </small></span> </div> <small>Le {{ comment.dateComment| date("d/m/Y") }} à {{ comment.dateComment| date("H:i") }}</small>
                </div>
            </div>
        {% endfor %}
            {% else %}
            <div class="bg-light p-2">
            <h4>Aucun commentaires</h4>
            {% endif %}
            </div>
            {% if session.user %}
         <div class="card p-3 mt-2">
                    <h4> Publier un commentaire </h4>
                    <form method ="POST">
                    <div class="d-flex flex-row align-items-start">@{{ session.user.email }}<textarea name="commentaire"class="form-control ml-1 shadow-none textarea"></textarea></div>
                    <div class="mt-2 text-right"><button class="btn btn-primary btn-sm shadow-none" type="submit">Poster votre commentaire</button>
                </div>
                </form>
                {% else %}
                <a class ="" href="index.php?action=login"><button class=" text-center btn btn-primary btn-sm shadow-none commentConnect " type="button">Connectez vous pour commenter</button></a>
            {% endif %}
        </div>
    </div>
</div>


    {# <article>
    
            <h2>title = {{ post.title }}</h2>
            <p>text = {{ post.content}}</p>
             <h4> Auteur = {{post.pseudo}} </h4>
             <span> Date de Publication :{{post.DateCreated}} </span>
    </article> #}

    {# <section>
        <h3>Commentaires</h3>
        {% if comments %}
            {% for comment in comments %}
                <p>id =  {{ comment.idPost }}<br>
                pseudo = {{ comment.pseudoUser }}<br>
                text = {{ comment.content }}</p>
               
            {% endfor %}
        {% else %}
            <h4>Aucun commentaires</h4>
        {% endif %} #}
    {# </section> #}
{% endblock %}
{% include "/frontoffice/footer.html.twig" %} 
